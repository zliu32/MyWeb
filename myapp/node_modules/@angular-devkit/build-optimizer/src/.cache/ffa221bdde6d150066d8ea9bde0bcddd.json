{"remainingRequest":"C:\\Users\\Frank Liu\\Documents\\Github\\MyWeb\\myapp\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js??ref--8-1!C:\\Users\\Frank Liu\\Documents\\Github\\MyWeb\\myapp\\node_modules\\@swimlane\\ngx-charts\\release\\heat-map\\heat-map.component.js","dependencies":[{"path":"C:\\Users\\Frank Liu\\Documents\\Github\\MyWeb\\myapp\\node_modules\\@swimlane\\ngx-charts\\release\\heat-map\\heat-map.component.js","mtime":499162500000},{"path":"C:\\Users\\Frank Liu\\Documents\\Github\\MyWeb\\myapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1529671348740},{"path":"C:\\Users\\Frank Liu\\Documents\\Github\\MyWeb\\myapp\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js","mtime":1528256844000}],"contextDependencies":[],"result":["import { __extends } from \"tslib\";\nimport { __decorate } from \"tslib\";\nimport { __metadata } from \"tslib\";\nimport { Component, Input, ViewEncapsulation, ChangeDetectionStrategy, ContentChild, TemplateRef } from '@angular/core';\nimport { scaleBand } from 'd3-scale';\nimport { BaseChartComponent } from '../common/base-chart.component';\nimport { calculateViewDimensions } from '../common/view-dimensions.helper';\nimport { ColorHelper } from '../common/color.helper';\nvar HeatMapComponent = /** @class */ /*@__PURE__*/ (function (_super) {\n    __extends(HeatMapComponent, _super);\n    function HeatMapComponent() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.legendTitle = 'Legend';\n        _this.innerPadding = 8;\n        _this.tooltipDisabled = false;\n        _this.margin = [10, 20, 10, 20];\n        _this.xAxisHeight = 0;\n        _this.yAxisWidth = 0;\n        _this.scaleType = 'linear';\n        return _this;\n    }\n    HeatMapComponent.prototype.update = function () {\n        _super.prototype.update.call(this);\n        this.formatDates();\n        this.xDomain = this.getXDomain();\n        this.yDomain = this.getYDomain();\n        this.valueDomain = this.getValueDomain();\n        this.scaleType = this.getScaleType(this.valueDomain);\n        this.dims = calculateViewDimensions({\n            width: this.width,\n            height: this.height,\n            margins: this.margin,\n            showXAxis: this.xAxis,\n            showYAxis: this.yAxis,\n            xAxisHeight: this.xAxisHeight,\n            yAxisWidth: this.yAxisWidth,\n            showXLabel: this.showXAxisLabel,\n            showYLabel: this.showYAxisLabel,\n            showLegend: this.legend,\n            legendType: this.scaleType\n        });\n        if (this.scaleType === 'linear') {\n            var min = this.min;\n            var max = this.max;\n            if (!this.min) {\n                min = Math.min.apply(Math, [0].concat(this.valueDomain));\n            }\n            if (!this.max) {\n                max = Math.max.apply(Math, this.valueDomain);\n            }\n            this.valueDomain = [min, max];\n        }\n        this.xScale = this.getXScale();\n        this.yScale = this.getYScale();\n        this.setColors();\n        this.legendOptions = this.getLegendOptions();\n        this.transform = \"translate(\" + this.dims.xOffset + \" , \" + this.margin[0] + \")\";\n        this.rects = this.getRects();\n    };\n    HeatMapComponent.prototype.getXDomain = function () {\n        var domain = [];\n        for (var _i = 0, _a = this.results; _i < _a.length; _i++) {\n            var group = _a[_i];\n            if (!domain.includes(group.name)) {\n                domain.push(group.name);\n            }\n        }\n        return domain;\n    };\n    HeatMapComponent.prototype.getYDomain = function () {\n        var domain = [];\n        for (var _i = 0, _a = this.results; _i < _a.length; _i++) {\n            var group = _a[_i];\n            for (var _b = 0, _c = group.series; _b < _c.length; _b++) {\n                var d = _c[_b];\n                if (!domain.includes(d.name)) {\n                    domain.push(d.name);\n                }\n            }\n        }\n        return domain;\n    };\n    HeatMapComponent.prototype.getValueDomain = function () {\n        var domain = [];\n        for (var _i = 0, _a = this.results; _i < _a.length; _i++) {\n            var group = _a[_i];\n            for (var _b = 0, _c = group.series; _b < _c.length; _b++) {\n                var d = _c[_b];\n                if (!domain.includes(d.value)) {\n                    domain.push(d.value);\n                }\n            }\n        }\n        return domain;\n    };\n    /**\n     * Converts the input to gap paddingInner in fraction\n     * Supports the following inputs:\n     *    Numbers: 8\n     *    Strings: \"8\", \"8px\", \"8%\"\n     *    Arrays: [8,2], \"8,2\", \"[8,2]\"\n     *    Mixed: [8,\"2%\"], [\"8px\",\"2%\"], \"8,2%\", \"[8,2%]\"\n     *\n     * @param {(string | number | Array<string | number>)} value\n     * @param {number} [index=0]\n     * @param {number} N\n     * @param {number} L\n     * @returns {number}\n     *\n     * @memberOf HeatMapComponent\n     */\n    HeatMapComponent.prototype.getDimension = function (value, index, N, L) {\n        if (index === void 0) {\n            index = 0;\n        }\n        if (typeof value === 'string') {\n            value = value\n                .replace('[', '')\n                .replace(']', '')\n                .replace('px', '')\n                .replace('\\'', '');\n            if (value.includes(',')) {\n                value = value.split(',');\n            }\n        }\n        if (Array.isArray(value) && typeof index === 'number') {\n            return this.getDimension(value[index], null, N, L);\n        }\n        if (typeof value === 'string' && value.includes('%')) {\n            return +value.replace('%', '') / 100;\n        }\n        return N / (L / +value + 1);\n    };\n    HeatMapComponent.prototype.getXScale = function () {\n        var f = this.getDimension(this.innerPadding, 0, this.xDomain.length, this.dims.width);\n        return scaleBand()\n            .rangeRound([0, this.dims.width])\n            .domain(this.xDomain)\n            .paddingInner(f);\n    };\n    HeatMapComponent.prototype.getYScale = function () {\n        var f = this.getDimension(this.innerPadding, 1, this.yDomain.length, this.dims.height);\n        return scaleBand()\n            .rangeRound([this.dims.height, 0])\n            .domain(this.yDomain)\n            .paddingInner(f);\n    };\n    HeatMapComponent.prototype.getRects = function () {\n        var _this = this;\n        var rects = [];\n        this.xDomain.map(function (xVal) {\n            _this.yDomain.map(function (yVal) {\n                rects.push({\n                    x: _this.xScale(xVal),\n                    y: _this.yScale(yVal),\n                    rx: 3,\n                    width: _this.xScale.bandwidth(),\n                    height: _this.yScale.bandwidth(),\n                    fill: 'rgba(200,200,200,0.03)'\n                });\n            });\n        });\n        return rects;\n    };\n    HeatMapComponent.prototype.onClick = function (data) {\n        this.select.emit(data);\n    };\n    HeatMapComponent.prototype.getScaleType = function (values) {\n        var num = true;\n        for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\n            var value = values_1[_i];\n            if (typeof value !== 'number') {\n                num = false;\n            }\n        }\n        if (num)\n            return 'linear';\n        return 'ordinal';\n    };\n    HeatMapComponent.prototype.setColors = function () {\n        this.colors = new ColorHelper(this.scheme, this.scaleType, this.valueDomain);\n    };\n    HeatMapComponent.prototype.getLegendOptions = function () {\n        return {\n            scaleType: this.scaleType,\n            domain: this.valueDomain,\n            colors: this.scaleType === 'ordinal' ? this.colors : this.colors.scale,\n            title: this.scaleType === 'ordinal' ? this.legendTitle : undefined\n        };\n    };\n    HeatMapComponent.prototype.updateYAxisWidth = function (_a) {\n        var width = _a.width;\n        this.yAxisWidth = width;\n        this.update();\n    };\n    HeatMapComponent.prototype.updateXAxisHeight = function (_a) {\n        var height = _a.height;\n        this.xAxisHeight = height;\n        this.update();\n    };\n    return HeatMapComponent;\n}(BaseChartComponent));\nexport { HeatMapComponent };\n//# sourceMappingURL=heat-map.component.js.map\n",null]}