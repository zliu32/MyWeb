{"remainingRequest":"C:\\Users\\Frank Liu\\Documents\\Github\\MyWeb\\myapp\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js??ref--8-1!C:\\Users\\Frank Liu\\Documents\\Github\\MyWeb\\myapp\\node_modules\\@swimlane\\ngx-charts\\release\\gauge\\linear-gauge.component.js","dependencies":[{"path":"C:\\Users\\Frank Liu\\Documents\\Github\\MyWeb\\myapp\\node_modules\\@swimlane\\ngx-charts\\release\\gauge\\linear-gauge.component.js","mtime":499162500000},{"path":"C:\\Users\\Frank Liu\\Documents\\Github\\MyWeb\\myapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1529671348740},{"path":"C:\\Users\\Frank Liu\\Documents\\Github\\MyWeb\\myapp\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js","mtime":1528256844000}],"contextDependencies":[],"result":["import { __extends } from \"tslib\";\nimport { __decorate } from \"tslib\";\nimport { __metadata } from \"tslib\";\nimport { Component, Input, ElementRef, ViewChild, ViewEncapsulation, ChangeDetectionStrategy } from '@angular/core';\nimport { scaleLinear } from 'd3-scale';\nimport { BaseChartComponent } from '../common/base-chart.component';\nimport { calculateViewDimensions } from '../common/view-dimensions.helper';\nimport { ColorHelper } from '../common/color.helper';\nvar LinearGaugeComponent = /** @class */ /*@__PURE__*/ (function (_super) {\n    __extends(LinearGaugeComponent, _super);\n    function LinearGaugeComponent() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.min = 0;\n        _this.max = 100;\n        _this.value = 0;\n        _this.margin = [10, 20, 10, 20];\n        _this.valueResizeScale = 1;\n        _this.unitsResizeScale = 1;\n        _this.valueTextTransform = '';\n        _this.valueTranslate = '';\n        _this.unitsTextTransform = '';\n        _this.unitsTranslate = '';\n        return _this;\n    }\n    LinearGaugeComponent.prototype.ngAfterViewInit = function () {\n        var _this = this;\n        _super.prototype.ngAfterViewInit.call(this);\n        setTimeout(function () {\n            _this.scaleText('value');\n            _this.scaleText('units');\n        });\n    };\n    LinearGaugeComponent.prototype.update = function () {\n        var _this = this;\n        _super.prototype.update.call(this);\n        this.hasPreviousValue = this.previousValue !== undefined;\n        this.max = Math.max(this.max, this.value);\n        this.min = Math.min(this.min, this.value);\n        if (this.hasPreviousValue) {\n            this.max = Math.max(this.max, this.previousValue);\n            this.min = Math.min(this.min, this.previousValue);\n        }\n        this.dims = calculateViewDimensions({\n            width: this.width,\n            height: this.height,\n            margins: this.margin\n        });\n        this.valueDomain = this.getValueDomain();\n        this.valueScale = this.getValueScale();\n        this.displayValue = this.getDisplayValue();\n        this.setColors();\n        var xOffset = this.margin[3] + this.dims.width / 2;\n        var yOffset = this.margin[0] + this.dims.height / 2;\n        this.transform = \"translate(\" + xOffset + \", \" + yOffset + \")\";\n        this.transformLine = \"translate(\" + (this.margin[3] + this.valueScale(this.previousValue)) + \", \" + yOffset + \")\";\n        this.valueTranslate = \"translate(0, -15)\";\n        this.unitsTranslate = \"translate(0, 15)\";\n        setTimeout(function () { return _this.scaleText('value'); }, 50);\n        setTimeout(function () { return _this.scaleText('units'); }, 50);\n    };\n    LinearGaugeComponent.prototype.getValueDomain = function () {\n        return [this.min, this.max];\n    };\n    LinearGaugeComponent.prototype.getValueScale = function () {\n        return scaleLinear()\n            .range([0, this.dims.width])\n            .domain(this.valueDomain);\n    };\n    LinearGaugeComponent.prototype.getDisplayValue = function () {\n        if (this.valueFormatting) {\n            return this.valueFormatting(this.value);\n        }\n        return this.value.toLocaleString();\n    };\n    LinearGaugeComponent.prototype.scaleText = function (element, repeat) {\n        var _this = this;\n        if (repeat === void 0) {\n            repeat = true;\n        }\n        var el;\n        var resizeScale;\n        if (element === 'value') {\n            el = this.valueTextEl;\n            resizeScale = this.valueResizeScale;\n        }\n        else {\n            el = this.unitsTextEl;\n            resizeScale = this.unitsResizeScale;\n        }\n        var _a = el.nativeElement.getBoundingClientRect(), width = _a.width, height = _a.height;\n        if (width === 0 || height === 0)\n            return;\n        var oldScale = resizeScale;\n        var availableWidth = this.dims.width;\n        var availableHeight = Math.max(this.dims.height / 2 - 15, 0);\n        var resizeScaleWidth = Math.floor((availableWidth / (width / resizeScale)) * 100) / 100;\n        var resizeScaleHeight = Math.floor((availableHeight / (height / resizeScale)) * 100) / 100;\n        resizeScale = Math.min(resizeScaleHeight, resizeScaleWidth);\n        if (resizeScale !== oldScale) {\n            if (element === 'value') {\n                this.valueResizeScale = resizeScale;\n                this.valueTextTransform = \"scale(\" + resizeScale + \", \" + resizeScale + \")\";\n            }\n            else {\n                this.unitsResizeScale = resizeScale;\n                this.unitsTextTransform = \"scale(\" + resizeScale + \", \" + resizeScale + \")\";\n            }\n            this.cd.markForCheck();\n            if (repeat) {\n                setTimeout(function () { _this.scaleText(element, false); }, 50);\n            }\n        }\n    };\n    LinearGaugeComponent.prototype.onClick = function () {\n        this.select.emit({\n            name: 'Value',\n            value: this.value\n        });\n    };\n    LinearGaugeComponent.prototype.setColors = function () {\n        this.colors = new ColorHelper(this.scheme, 'ordinal', [this.value], this.customColors);\n    };\n    return LinearGaugeComponent;\n}(BaseChartComponent));\nexport { LinearGaugeComponent };\n//# sourceMappingURL=linear-gauge.component.js.map\n",null]}