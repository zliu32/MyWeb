{"remainingRequest":"C:\\Users\\Frank Liu\\Documents\\Github\\MyWeb\\myapp\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js??ref--8-1!C:\\Users\\Frank Liu\\Documents\\Github\\MyWeb\\myapp\\node_modules\\@swimlane\\ngx-charts\\release\\common\\grid-layout.helper.js","dependencies":[{"path":"C:\\Users\\Frank Liu\\Documents\\Github\\MyWeb\\myapp\\node_modules\\@swimlane\\ngx-charts\\release\\common\\grid-layout.helper.js","mtime":499162500000},{"path":"C:\\Users\\Frank Liu\\Documents\\Github\\MyWeb\\myapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1529671348740},{"path":"C:\\Users\\Frank Liu\\Documents\\Github\\MyWeb\\myapp\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js","mtime":1528256844000}],"contextDependencies":[],"result":["import { scaleBand } from 'd3-scale';\nexport function gridSize(dims, len, minWidth) {\n    var rows = 1;\n    var cols = len;\n    var width = dims.width;\n    if (width > minWidth) {\n        while (width / cols < minWidth) {\n            rows += 1;\n            cols = Math.ceil(len / rows);\n        }\n    }\n    return [cols, rows];\n}\nexport function gridLayout(dims, data, minWidth, designatedTotal) {\n    var xScale = scaleBand();\n    var yScale = scaleBand();\n    var width = dims.width;\n    var height = dims.height;\n    var _a = gridSize(dims, data.length, minWidth), columns = _a[0], rows = _a[1];\n    var xDomain = [];\n    var yDomain = [];\n    for (var i = 0; i < rows; i++) {\n        yDomain.push(i);\n    }\n    for (var i = 0; i < columns; i++) {\n        xDomain.push(i);\n    }\n    xScale.domain(xDomain);\n    yScale.domain(yDomain);\n    xScale.rangeRound([0, width], 0.1);\n    yScale.rangeRound([0, height], 0.1);\n    var res = [];\n    var total = designatedTotal ? designatedTotal : getTotal(data);\n    var cardWidth = xScale.bandwidth();\n    var cardHeight = yScale.bandwidth();\n    for (var i = 0; i < data.length; i++) {\n        res[i] = {};\n        res[i].data = {\n            name: data[i] ? data[i].name : '',\n            value: data[i] ? data[i].value : undefined,\n            extra: data[i] ? data[i].extra : undefined,\n        };\n        res[i].x = xScale(i % columns);\n        res[i].y = yScale(Math.floor(i / columns));\n        res[i].width = cardWidth;\n        res[i].height = cardHeight;\n        res[i].data.percent = (total > 0) ? res[i].data.value / total : 0;\n        res[i].data.total = total;\n    }\n    return res;\n}\nfunction getTotal(results) {\n    return results\n        .map(function (d) { return d ? d.value : 0; })\n        .reduce(function (sum, val) { return sum + val; }, 0);\n}\n//# sourceMappingURL=grid-layout.helper.js.map",null]}